{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/Tiago/01.Projects/AppProdutosPortugueses/app/api/catalog/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\n\nexport async function GET() {\n  const url = process.env.NEXT_PUBLIC_CATALOG_URL;\n\n  if (!url) {\n    return NextResponse.json({\n      categories: [],\n      items: [],\n      source: \"ERROR_NO_ENV\",\n    });\n  }\n\n  const res = await fetch(url);\n  const text = await res.text();\n\n  const rows = text.split(\"\\n\").slice(1);\n  const items = rows\n    .map((r) => {\n      const [id, categoryId, name, priceEur, image, description, active, order] =\n        r.split(\",\");\n\n      return {\n        id,\n        categoryId,\n        name,\n        priceEur: Number(priceEur),\n        image,\n        description,\n        active,\n        order: Number(order),\n      };\n    })\n    .filter((i) => i.id && i.active !== \"no\");\n\n  // categories auto\n  const catMap = new Map();\n  items.forEach((i) => {\n    if (!catMap.has(i.categoryId)) {\n      catMap.set(i.categoryId, { id: i.categoryId, name: i.categoryId });\n    }\n  });\n\n  const categories = Array.from(catMap.values());\n\n  return NextResponse.json({\n    categories,\n    items,\n    source: \"GOOGLE_SHEET\",\n  });\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe;IACpB,MAAM;IAEN;;IAQA,MAAM,MAAM,MAAM,MAAM;IACxB,MAAM,OAAO,MAAM,IAAI,IAAI;IAE3B,MAAM,OAAO,KAAK,KAAK,CAAC,MAAM,KAAK,CAAC;IACpC,MAAM,QAAQ,KACX,GAAG,CAAC,CAAC;QACJ,MAAM,CAAC,IAAI,YAAY,MAAM,UAAU,OAAO,aAAa,QAAQ,MAAM,GACvE,EAAE,KAAK,CAAC;QAEV,OAAO;YACL;YACA;YACA;YACA,UAAU,OAAO;YACjB;YACA;YACA;YACA,OAAO,OAAO;QAChB;IACF,GACC,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,IAAI,EAAE,MAAM,KAAK;IAEtC,kBAAkB;IAClB,MAAM,SAAS,IAAI;IACnB,MAAM,OAAO,CAAC,CAAC;QACb,IAAI,CAAC,OAAO,GAAG,CAAC,EAAE,UAAU,GAAG;YAC7B,OAAO,GAAG,CAAC,EAAE,UAAU,EAAE;gBAAE,IAAI,EAAE,UAAU;gBAAE,MAAM,EAAE,UAAU;YAAC;QAClE;IACF;IAEA,MAAM,aAAa,MAAM,IAAI,CAAC,OAAO,MAAM;IAE3C,OAAO,gJAAY,CAAC,IAAI,CAAC;QACvB;QACA;QACA,QAAQ;IACV;AACF"}}]
}