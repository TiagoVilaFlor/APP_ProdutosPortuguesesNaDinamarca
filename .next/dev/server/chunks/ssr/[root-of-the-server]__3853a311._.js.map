{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///D:/Tiago/01.Projects/AppProdutosPortugueses/app/data/catalog.ts"],"sourcesContent":["export type Category = {\n  id: string;\n  name: string;\n  image?: string; // opcional\n};\n\nexport type CatalogItem = {\n  id: string;\n  name: string;\n  categoryId: string;\n  unitLabel?: string;\n  priceEur: number;      // preço por unidade (EUR)\n  volumeLiters: number;  // usado para calcular caixas (20L/caixa)\n  image?: string;\n};\n\n// Regras fixas (podes ajustar)\nexport const BOX_CAPACITY_LITERS = 20;   // 20L por caixa\nexport const SHIPPING_EUR_PER_BOX = 20;  // 20€ por caixa\n\nexport const formatEur = (value: number) =>\n  new Intl.NumberFormat(\"pt-PT\", { style: \"currency\", currency: \"EUR\" }).format(value);\n\n// Dados fallback (se o Google Sheet não estiver configurado ainda)\nexport const fallbackCategories: Category[] = [\n  { id: \"azeites\", name: \"Azeites\" },\n  { id: \"conservas\", name: \"Conservas\" },\n  { id: \"doces\", name: \"Doces\" },\n];\n\nexport const fallbackItems: CatalogItem[] = [\n  { id: \"tdl-azeite-500\", name: \"Azeite Terra das Lanchas\", unitLabel: \"500ml\", categoryId: \"azeites\", priceEur: 12.5, volumeLiters: 0.5 },\n  { id: \"tdl-azeite-1l\",  name: \"Azeite Terra das Lanchas\", unitLabel: \"1L\",    categoryId: \"azeites\", priceEur: 22.0, volumeLiters: 1 },\n  { id: \"sardinha-pt\",    name: \"Sardinha em azeite\",       categoryId: \"conservas\", priceEur: 4.5, volumeLiters: 0 },\n  { id: \"doce-figo\",      name: \"Doce de figo\",             categoryId: \"doces\", priceEur: 5.5, volumeLiters: 0 },\n];\n"],"names":[],"mappings":";;;;;;;;;;;;AAiBO,MAAM,sBAAsB,IAAM,gBAAgB;AAClD,MAAM,uBAAuB,IAAK,gBAAgB;AAElD,MAAM,YAAY,CAAC,QACxB,IAAI,KAAK,YAAY,CAAC,SAAS;QAAE,OAAO;QAAY,UAAU;IAAM,GAAG,MAAM,CAAC;AAGzE,MAAM,qBAAiC;IAC5C;QAAE,IAAI;QAAW,MAAM;IAAU;IACjC;QAAE,IAAI;QAAa,MAAM;IAAY;IACrC;QAAE,IAAI;QAAS,MAAM;IAAQ;CAC9B;AAEM,MAAM,gBAA+B;IAC1C;QAAE,IAAI;QAAkB,MAAM;QAA4B,WAAW;QAAS,YAAY;QAAW,UAAU;QAAM,cAAc;IAAI;IACvI;QAAE,IAAI;QAAkB,MAAM;QAA4B,WAAW;QAAS,YAAY;QAAW,UAAU;QAAM,cAAc;IAAE;IACrI;QAAE,IAAI;QAAkB,MAAM;QAA4B,YAAY;QAAa,UAAU;QAAK,cAAc;IAAE;IAClH;QAAE,IAAI;QAAkB,MAAM;QAA4B,YAAY;QAAS,UAAU;QAAK,cAAc;IAAE;CAC/G"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///D:/Tiago/01.Projects/AppProdutosPortugueses/components/Accordion.tsx"],"sourcesContent":["\"use client\";\n\nexport function Accordion({\n  title,\n  open,\n  onToggle,\n  children,\n  anchorId,\n}: {\n  title: string;\n  open: boolean;\n  onToggle: () => void;\n  children: React.ReactNode;\n  anchorId?: string;\n}) {\n  return (\n    <section id={anchorId} className=\"rounded-2xl border border-neutral-200 bg-white\">\n      <button\n        className=\"flex w-full items-center justify-between px-4 py-4 text-left\"\n        onClick={onToggle}\n      >\n        <span className=\"font-semibold\">{title}</span>\n        <span className=\"text-neutral-500\">{open ? \"–\" : \"+\"}</span>\n      </button>\n\n      {open && <div className=\"px-4 pb-4\">{children}</div>}\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAEO,SAAS,UAAU,EACxB,KAAK,EACL,IAAI,EACJ,QAAQ,EACR,QAAQ,EACR,QAAQ,EAOT;IACC,qBACE,8OAAC;QAAQ,IAAI;QAAU,WAAU;;0BAC/B,8OAAC;gBACC,WAAU;gBACV,SAAS;;kCAET,8OAAC;wBAAK,WAAU;kCAAiB;;;;;;kCACjC,8OAAC;wBAAK,WAAU;kCAAoB,OAAO,MAAM;;;;;;;;;;;;YAGlD,sBAAQ,8OAAC;gBAAI,WAAU;0BAAa;;;;;;;;;;;;AAG3C"}},
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///D:/Tiago/01.Projects/AppProdutosPortugueses/app/store/cart.ts"],"sourcesContent":["\"use client\";\nimport { create } from \"zustand\";\nimport { persist } from \"zustand/middleware\";\nimport { BOX_CAPACITY_LITERS, SHIPPING_EUR_PER_BOX } from \"@/app/data/catalog\";\n\nexport type CartLine = {\n  itemId: string;\n  name: string;\n  categoryId: string;\n  unitLabel?: string;\n  priceEur: number;\n  volumeLiters: number;\n  qty: number;\n};\n\ntype CartState = {\n  lines: CartLine[];\n  wantsTransport: boolean;\n\n  add: (item: Omit<CartLine, \"qty\">) => void;\n  setQty: (itemId: string, qty: number) => void;\n  remove: (itemId: string) => void;\n  clear: () => void;\n  setWantsTransport: (v: boolean) => void;\n\n  totalItems: () => number;\n  subtotalEur: () => number;\n\n  totalLiters: () => number;\n  boxesNeeded: () => number;\n  transportEur: () => number;\n\n  totalEur: () => number;\n};\n\nexport const useCart = create<CartState>()(\n  persist(\n    (set, get) => ({\n      lines: [],\n      wantsTransport: false,\n\n      add: (item) =>\n        set((s) => {\n          const found = s.lines.find((l) => l.itemId === item.itemId);\n          if (found) return { lines: s.lines.map((l) => (l.itemId === item.itemId ? { ...l, qty: l.qty + 1 } : l)) };\n          return { lines: [...s.lines, { ...item, qty: 1 }] };\n        }),\n\n      setQty: (itemId, qty) =>\n        set((s) => ({\n          lines:\n            qty <= 0\n              ? s.lines.filter((l) => l.itemId !== itemId)\n              : s.lines.map((l) => (l.itemId === itemId ? { ...l, qty } : l)),\n        })),\n\n      remove: (itemId) => set((s) => ({ lines: s.lines.filter((l) => l.itemId !== itemId) })),\n\n      clear: () => set({ lines: [], wantsTransport: false }),\n\n      setWantsTransport: (v) => set({ wantsTransport: v }),\n\n      totalItems: () => get().lines.reduce((acc, l) => acc + l.qty, 0),\n\n      subtotalEur: () => get().lines.reduce((acc, l) => acc + l.priceEur * l.qty, 0),\n\n      totalLiters: () => get().lines.reduce((acc, l) => acc + (l.volumeLiters ?? 0) * l.qty, 0),\n\n      boxesNeeded: () => {\n        const liters = get().totalLiters();\n        if (liters <= 0) return 0;\n        return Math.ceil(liters / BOX_CAPACITY_LITERS);\n      },\n\n      transportEur: () => (get().wantsTransport ? get().boxesNeeded() * SHIPPING_EUR_PER_BOX : 0),\n\n      totalEur: () => get().subtotalEur() + 20,\n    }),\n    { name: \"tdl-cart-eur-gsheets-v1\" }\n  )\n);\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAHA;;;;AAmCO,MAAM,UAAU,IAAA,kKAAM,IAC3B,IAAA,wJAAO,EACL,CAAC,KAAK,MAAQ,CAAC;QACb,OAAO,EAAE;QACT,gBAAgB;QAEhB,KAAK,CAAC,OACJ,IAAI,CAAC;gBACH,MAAM,QAAQ,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,KAAK,MAAM;gBAC1D,IAAI,OAAO,OAAO;oBAAE,OAAO,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,IAAO,EAAE,MAAM,KAAK,KAAK,MAAM,GAAG;4BAAE,GAAG,CAAC;4BAAE,KAAK,EAAE,GAAG,GAAG;wBAAE,IAAI;gBAAI;gBACzG,OAAO;oBAAE,OAAO;2BAAI,EAAE,KAAK;wBAAE;4BAAE,GAAG,IAAI;4BAAE,KAAK;wBAAE;qBAAE;gBAAC;YACpD;QAEF,QAAQ,CAAC,QAAQ,MACf,IAAI,CAAC,IAAM,CAAC;oBACV,OACE,OAAO,IACH,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,UACnC,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,IAAO,EAAE,MAAM,KAAK,SAAS;4BAAE,GAAG,CAAC;4BAAE;wBAAI,IAAI;gBAClE,CAAC;QAEH,QAAQ,CAAC,SAAW,IAAI,CAAC,IAAM,CAAC;oBAAE,OAAO,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK;gBAAQ,CAAC;QAErF,OAAO,IAAM,IAAI;gBAAE,OAAO,EAAE;gBAAE,gBAAgB;YAAM;QAEpD,mBAAmB,CAAC,IAAM,IAAI;gBAAE,gBAAgB;YAAE;QAElD,YAAY,IAAM,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,GAAG,EAAE;QAE9D,aAAa,IAAM,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,QAAQ,GAAG,EAAE,GAAG,EAAE;QAE5E,aAAa,IAAM,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,CAAC,EAAE,YAAY,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE;QAEvF,aAAa;YACX,MAAM,SAAS,MAAM,WAAW;YAChC,IAAI,UAAU,GAAG,OAAO;YACxB,OAAO,KAAK,IAAI,CAAC,SAAS,6IAAmB;QAC/C;QAEA,cAAc,IAAO,MAAM,cAAc,GAAG,MAAM,WAAW,KAAK,8IAAoB,GAAG;QAEzF,UAAU,IAAM,MAAM,WAAW,KAAK;IACxC,CAAC,GACD;IAAE,MAAM;AAA0B"}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///D:/Tiago/01.Projects/AppProdutosPortugueses/components/ItemModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { CatalogItem } from \"@/app/data/catalog\";\r\nimport { useCart } from \"@/app/store/cart\";\r\n\r\nexport function ItemModal({\r\n  item,\r\n  onClose,\r\n}: {\r\n  item: CatalogItem | null;\r\n  onClose: () => void;\r\n}) {\r\n  const { add } = useCart();\r\n\r\n  if (!item) return null;\r\n\r\n  function handleAdd() {\r\n    add({\r\n      ...item,\r\n      itemId: item.id,\r\n    });\r\n    onClose(); // fecha modal depois de adicionar\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm flex items-center justify-center\"\r\n      onClick={onClose}\r\n    >\r\n      <div\r\n        className=\"bg-white rounded-2xl max-w-md w-full p-5 shadow-xl relative animate-fadeIn\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/* Close */}\r\n        <button\r\n          onClick={onClose}\r\n          className=\"absolute top-3 right-3 text-neutral-500 text-lg\"\r\n        >\r\n          ✕\r\n        </button>\r\n\r\n        {/* Image */}\r\n        <img\r\n          src={item.image}\r\n          alt={item.name}\r\n          className=\"w-full h-48 object-cover rounded-xl border\"\r\n        />\r\n\r\n        {/* Title */}\r\n        <h2 className=\"mt-3 text-lg font-semibold\">{item.name}</h2>\r\n\r\n        {/* Description */}\r\n        <p className=\"mt-2 text-sm text-neutral-600\">\r\n          {item.description || \"Produto selecionado Terra das Lanchas.\"}\r\n        </p>\r\n\r\n        {/* Price */}\r\n        <div className=\"mt-3 text-lg font-semibold\">\r\n          {item.priceEur.toFixed(2)} €\r\n        </div>\r\n\r\n        {/* CTA */}\r\n        <button\r\n          onClick={handleAdd}\r\n          className=\"mt-4 w-full bg-black text-white py-3 rounded-xl font-medium hover:bg-neutral-800 transition\"\r\n        >\r\n          Adicionar ao carrinho\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAKO,SAAS,UAAU,EACxB,IAAI,EACJ,OAAO,EAIR;IACC,MAAM,EAAE,GAAG,EAAE,GAAG,IAAA,+HAAO;IAEvB,IAAI,CAAC,MAAM,OAAO;IAElB,SAAS;QACP,IAAI;YACF,GAAG,IAAI;YACP,QAAQ,KAAK,EAAE;QACjB;QACA,WAAW,kCAAkC;IAC/C;IAEA,qBACE,8OAAC;QACC,WAAU;QACV,SAAS;kBAET,cAAA,8OAAC;YACC,WAAU;YACV,SAAS,CAAC,IAAM,EAAE,eAAe;;8BAGjC,8OAAC;oBACC,SAAS;oBACT,WAAU;8BACX;;;;;;8BAKD,8OAAC;oBACC,KAAK,KAAK,KAAK;oBACf,KAAK,KAAK,IAAI;oBACd,WAAU;;;;;;8BAIZ,8OAAC;oBAAG,WAAU;8BAA8B,KAAK,IAAI;;;;;;8BAGrD,8OAAC;oBAAE,WAAU;8BACV,KAAK,WAAW,IAAI;;;;;;8BAIvB,8OAAC;oBAAI,WAAU;;wBACZ,KAAK,QAAQ,CAAC,OAAO,CAAC;wBAAG;;;;;;;8BAI5B,8OAAC;oBACC,SAAS;oBACT,WAAU;8BACX;;;;;;;;;;;;;;;;;AAMT"}},
    {"offset": {"line": 296, "column": 0}, "map": {"version":3,"sources":["file:///D:/Tiago/01.Projects/AppProdutosPortugueses/components/ItemRow.tsx"],"sourcesContent":["\"use client\";\nimport type { CatalogItem } from \"@/app/data/catalog\";\nimport { formatEur } from \"@/app/data/catalog\";\nimport { useCart } from \"@/app/store/cart\";\nimport { ItemModal } from \"./ItemModal\";\nimport { useState } from \"react\";\n\nexport function ItemRow({ item }: { item: CatalogItem }) {\n  const { lines, add, setQty } = useCart();\n  const line = lines.find((l) => l.itemId === item.id);\n  const qty = line?.qty ?? 0;\n  const [openItem, setOpenItem] = useState<CatalogItem | null>(null);\n\n  return (\n    <div className=\"flex items-center justify-between py-3\">\n      <div className=\"flex items-center gap-3 pr-3\">\n\n        {/* IMAGEM DO PRODUTO */}\n        {item.image ? (\n          <img\n            src={item.image}\n            alt={item.name}\n            className=\"h-12 w-12 rounded-xl object-cover border border-neutral-200\"\n            onClick={() => setOpenItem(item)}\n          />\n        ) : (\n          <div className=\"h-12 w-12 rounded-xl bg-neutral-100 border border-neutral-200\" />\n        )}\n\n        {/* TEXTO DO PRODUTO */}\n        <div>\n          <div\n            className=\"font-medium cursor-pointer hover:underline\"\n            onClick={() => setOpenItem(item)}\n          >{item.name}</div>\n          <div className=\"text-xs text-neutral-500\">\n            {[item.unitLabel, formatEur(item.priceEur)].filter(Boolean).join(\" • \")}\n          </div>\n        </div>\n\n      </div>\n\n\n      {qty === 0 ? (\n        <button\n          className=\"rounded-lg bg-neutral-900 px-3 py-2 text-sm text-white\"\n          onClick={() =>\n            add({\n              itemId: item.id,\n              name: item.name,\n              categoryId: item.categoryId,\n              unitLabel: item.unitLabel,\n              priceEur: item.priceEur,\n              image: item.image,\n              volumeLiters: item.volumeLiters,\n            })\n          }\n        >\n          Adicionar\n        </button>\n      ) : (\n        <div className=\"flex items-center gap-2\">\n          <button className=\"h-9 w-9 rounded-lg border\" onClick={() => setQty(item.id, qty - 1)}>-</button>\n          <div className=\"w-6 text-center font-medium\">{qty}</div>\n          <button className=\"h-9 w-9 rounded-lg border\" onClick={() => setQty(item.id, qty + 1)}>+</button>\n        </div>\n      )}\n      <ItemModal item={openItem} onClose={() => setOpenItem(null)} />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOO,SAAS,QAAQ,EAAE,IAAI,EAAyB;IACrD,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,IAAA,+HAAO;IACtC,MAAM,OAAO,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,KAAK,EAAE;IACnD,MAAM,MAAM,MAAM,OAAO;IACzB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAqB;IAE7D,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;oBAGZ,KAAK,KAAK,iBACT,8OAAC;wBACC,KAAK,KAAK,KAAK;wBACf,KAAK,KAAK,IAAI;wBACd,WAAU;wBACV,SAAS,IAAM,YAAY;;;;;6CAG7B,8OAAC;wBAAI,WAAU;;;;;;kCAIjB,8OAAC;;0CACC,8OAAC;gCACC,WAAU;gCACV,SAAS,IAAM,YAAY;0CAC3B,KAAK,IAAI;;;;;;0CACX,8OAAC;gCAAI,WAAU;0CACZ;oCAAC,KAAK,SAAS;oCAAE,IAAA,mIAAS,EAAC,KAAK,QAAQ;iCAAE,CAAC,MAAM,CAAC,SAAS,IAAI,CAAC;;;;;;;;;;;;;;;;;;YAOtE,QAAQ,kBACP,8OAAC;gBACC,WAAU;gBACV,SAAS,IACP,IAAI;wBACF,QAAQ,KAAK,EAAE;wBACf,MAAM,KAAK,IAAI;wBACf,YAAY,KAAK,UAAU;wBAC3B,WAAW,KAAK,SAAS;wBACzB,UAAU,KAAK,QAAQ;wBACvB,OAAO,KAAK,KAAK;wBACjB,cAAc,KAAK,YAAY;oBACjC;0BAEH;;;;;qCAID,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAO,WAAU;wBAA4B,SAAS,IAAM,OAAO,KAAK,EAAE,EAAE,MAAM;kCAAI;;;;;;kCACvF,8OAAC;wBAAI,WAAU;kCAA+B;;;;;;kCAC9C,8OAAC;wBAAO,WAAU;wBAA4B,SAAS,IAAM,OAAO,KAAK,EAAE,EAAE,MAAM;kCAAI;;;;;;;;;;;;0BAG3F,8OAAC,qIAAS;gBAAC,MAAM;gBAAU,SAAS,IAAM,YAAY;;;;;;;;;;;;AAG5D"}},
    {"offset": {"line": 442, "column": 0}, "map": {"version":3,"sources":["file:///D:/Tiago/01.Projects/AppProdutosPortugueses/app/hooks/useCatalog.ts"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport type { Category, CatalogItem } from \"@/app/data/catalog\";\n\nexport function useCatalog() {\n  const [loading, setLoading] = useState(true);\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [items, setItems] = useState<CatalogItem[]>([]);\n  const [source, setSource] = useState<string>(\"\");\n\n  useEffect(() => {\n    let alive = true;\n    (async () => {\n      try {\n        const res = await fetch(\"/api/catalog\", { cache: \"no-store\" });\n        const data = await res.json();\n        if (!alive) return;\n        setCategories(data.categories ?? []);\n        setItems(data.items ?? []);\n        setSource(data.source ?? \"\");\n      } catch {\n        // leave empty\n      } finally {\n        if (alive) setLoading(false);\n      }\n    })();\n\n    return () => {\n      alive = false;\n    };\n  }, []);\n\n  return { loading, categories, items, source };\n}\n"],"names":[],"mappings":";;;;AACA;AADA;;AAIO,SAAS;IACd,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAa,EAAE;IAC3D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB,EAAE;IACpD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAS;IAE7C,IAAA,kNAAS,EAAC;QACR,IAAI,QAAQ;QACZ,CAAC;YACC,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,gBAAgB;oBAAE,OAAO;gBAAW;gBAC5D,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,IAAI,CAAC,OAAO;gBACZ,cAAc,KAAK,UAAU,IAAI,EAAE;gBACnC,SAAS,KAAK,KAAK,IAAI,EAAE;gBACzB,UAAU,KAAK,MAAM,IAAI;YAC3B,EAAE,OAAM;YACN,cAAc;YAChB,SAAU;gBACR,IAAI,OAAO,WAAW;YACxB;QACF,CAAC;QAED,OAAO;YACL,QAAQ;QACV;IACF,GAAG,EAAE;IAEL,OAAO;QAAE;QAAS;QAAY;QAAO;IAAO;AAC9C"}},
    {"offset": {"line": 487, "column": 0}, "map": {"version":3,"sources":["file:///D:/Tiago/01.Projects/AppProdutosPortugueses/app/select/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useMemo, useRef, useState } from \"react\";\nimport { formatEur } from \"@/app/data/catalog\";\nimport { Accordion } from \"@/components/Accordion\";\nimport { ItemRow } from \"@/components/ItemRow\";\nimport { useCart } from \"@/app/store/cart\";\nimport { useCatalog } from \"@/app/hooks/useCatalog\";\n\nexport default function SelectPage() {\n  // GOOGLE SHEET DATA\n  const { loading, categories, items } = useCatalog();\n\n  // CART\n  const { totalItems, subtotalEur, wantsTransport, transportEur, clear } = useCart();\n\n  const count = totalItems();\n  const subtotal = subtotalEur();\n  const transport = transportEur();\n\n  // Group items by category\n  const grouped = useMemo(() => {\n    return (categories ?? []).map((c) => ({\n      ...c,\n      items: (items ?? []).filter((i) => i.categoryId === c.id),\n    }));\n  }, [categories, items]);\n\n  // Scroll to category refs\n  const sectionRefs = useRef<Record<string, HTMLElement | null>>({});\n  const [openCategoryId, setOpenCategoryId] = useState<string>(\"\");\n\n  function scrollToCategory(catId: string) {\n    setOpenCategoryId(catId);\n    const el = sectionRefs.current[catId];\n    if (el) {\n      setTimeout(() => el.scrollIntoView({ behavior: \"smooth\", block: \"start\" }), 80);\n    }\n  }\n\n  const firstCatId = categories?.[0]?.id;\n\n  return (\n    <main className=\"pb-32 bg-neutral-50\">\n\n      {/* HEADER BAR */}\n      <div className=\"fixed top-0 left-0 right-0 z-50 bg-neutral-100\"> {/* INNER APP WIDTH */}\n        <div className=\"mx-auto max-w-md bg-white border-b border-neutral-200 px-4 py-3 flex items-center justify-between\">\n          <h1 className=\"text-base font-medium tracking-tight\">Explorar produtos</h1>\n\n          <button\n            onClick={() => {\n              clear();\n              window.location.href = \"/\";\n            }}\n            className=\"rounded-full bg-black text-white px-4 py-2 text-xs font-medium shadow\"\n          >\n            ← Voltar ao Início\n          </button>\n        </div>\n      </div>\n\n      {/* Spacer for fixed header */}\n      <div className=\"h-16\"></div>\n\n      {/* CATEGORY NAV */}\n      <div className=\"sticky top-16 z-10 bg-white/90 backdrop-blur border-b border-neutral-200\">\n        <div className=\"mx-auto max-w-md px-4 py-4\">\n          <h2 className=\"text-sm font-medium text-neutral-800\">Categorias</h2>\n\n          <div className=\"mt-3 flex flex-wrap gap-2\">\n            {(categories ?? []).map((c) => {\n              const active = (openCategoryId || firstCatId) === c.id;\n              return (\n                <button\n                  key={c.id}\n                  onClick={() => scrollToCategory(c.id)}\n                  className={[\n                    \"rounded-full px-4 py-2 text-sm border transition font-medium\",\n                    active\n                      ? \"border-black bg-black text-white\"\n                      : \"border-neutral-200 bg-white text-neutral-700 hover:border-neutral-400\",\n                  ].join(\" \")}\n                >\n                  {c.name}\n                </button>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n\n      {/* PRODUCT LIST */}\n      <div className=\"mx-auto max-w-md px-4 space-y-4 mt-4\">\n        {loading && (\n          <div className=\"rounded-2xl border border-neutral-200 bg-white p-4 text-sm text-neutral-700 shadow-sm\">\n            A carregar catálogo…\n          </div>\n        )}\n\n        {!loading && (categories?.length ?? 0) === 0 && (\n          <div className=\"rounded-2xl border border-neutral-200 bg-white p-4 text-sm text-red-600 shadow-sm\">\n            ❌ Não foi possível carregar categorias.\n            Verifica o Google Sheet e o link em <code>.env.local</code>.\n          </div>\n        )}\n\n        {grouped.map((g) => (\n          <div\n            key={g.id}\n            ref={(node) => {\n              sectionRefs.current[g.id] = node;\n            }}\n            className=\"scroll-mt-28\"\n          >\n            <Accordion\n              title={g.name}\n              open={(openCategoryId || firstCatId) === g.id}\n              onToggle={() =>\n                setOpenCategoryId((prev) => {\n                  const cur = prev || firstCatId || \"\";\n                  return cur === g.id ? \"\" : g.id;\n                })\n              }\n              anchorId={`cat-${g.id}`}\n            >\n              {g.items.length === 0 ? (\n                <p className=\"text-sm text-neutral-500\">Sem produtos nesta categoria.</p>\n              ) : (\n                <div className=\"divide-y divide-neutral-100\">\n                  {g.items.map((it) => (\n                    <ItemRow key={it.id} item={it} />\n                  ))}\n                </div>\n              )}\n            </Accordion>\n          </div>\n        ))}\n      </div>\n\n      {/* BOTTOM SUMMARY BAR */}\n      {count > 0 && (\n        <div className=\"fixed bottom-0 left-0 right-0 mx-auto max-w-md border-t bg-white p-4 shadow-lg\">\n          <div className=\"flex items-start justify-between gap-3\">\n\n            <div className=\"text-sm text-neutral-700\">\n              <div className=\"font-medium\">\n                {count} {count === 1 ? \"item\" : \"itens\"} no carrinho\n              </div>\n              <div className=\"text-xs mt-1\">\n                Subtotal: <span className=\"font-semibold\">{formatEur(subtotal)}</span>\n              </div>\n\n              {wantsTransport && (\n                <div className=\"text-xs text-neutral-600\">\n                  Transporte (estimado):{\" \"}\n                  <span className=\"font-semibold\">{formatEur(transport)}</span>\n                </div>\n              )}\n            </div>\n\n            <Link\n              href=\"/review\"\n              className=\"rounded-full bg-black px-5 py-3 text-sm text-white font-medium shadow hover:bg-neutral-800 transition\"\n            >\n              Finalizar reserva\n            </Link>\n          </div>\n        </div>\n      )}\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}